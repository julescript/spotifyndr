(this.webpackJsonpspotifyndr=this.webpackJsonpspotifyndr||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports={Landing:"Landing_Landing__1vOQe",leftPane:"Landing_leftPane__1x9Iz",rightPane:"Landing_rightPane__-yZ8x",IconLogo:"Landing_IconLogo__JPSR_",breath:"Landing_breath__2BR55"}},,,function(e,t,a){e.exports={Footer:"Footer_Footer__GZvmW",Container:"Footer_Container__2dBUl",Logo:"Footer_Logo__cgvkU",Copyright:"Footer_Copyright__1iKjX"}},,,function(e,t,a){e.exports={NavBar:"NavBar_NavBar__3JWdI",Account:"NavBar_Account__3PwKk"}},function(e,t,a){e.exports={ArtistCard:"ArtistCard_ArtistCard__OuGo2",Spacer:"ArtistCard_Spacer__1VUO8",Info:"ArtistCard_Info__3YDaq"}},function(e,t,a){e.exports={Loader:"Spinner_Loader__1twK-",LoaderParent:"Spinner_LoaderParent__3RO6f",light:"Spinner_light__1Esrz",load8:"Spinner_load8__36vjM"}},function(e,t,a){e.exports={Albums:"Albums_Albums__17CVc",Header:"Albums_Header__2dE3H",Back:"Albums_Back__1htdx"}},,,,,function(e,t,a){e.exports={Layout:"Layout_Layout__2BpO9",Children:"Layout_Children__2syKp"}},,,,,,,,,,,,,function(e,t,a){e.exports={container:"Container_container__2QYRU"}},function(e,t,a){e.exports={LoginCard:"LoginCard_LoginCard__dImu9",enable:"LoginCard_enable__3Idwm"}},function(e,t,a){e.exports=a.p+"static/media/logo_icon.da3ea075.svg"},function(e,t,a){e.exports={SectionTitle:"SectionTitle_SectionTitle__3quiz"}},function(e,t,a){e.exports={Grid:"CardsGrid_Grid__6-8yi",SectionTitle:"CardsGrid_SectionTitle__2XE0A"}},function(e,t,a){e.exports={RatingStars:"RatingStars_RatingStars__2DSv8"}},function(e,t,a){e.exports=a.p+"static/media/star_filled.765ace4e.svg"},function(e,t,a){e.exports=a.p+"static/media/star_empty.21cb713c.svg"},,function(e,t,a){e.exports={WelcomeText:"WelcomeText_WelcomeText__1HheW"}},function(e,t,a){e.exports={AlbumCard:"AlbumCard_AlbumCard__2h8gP"}},function(e,t,a){e.exports={BackButton:"BackButton_BackButton__1Gysp"}},function(e,t,a){e.exports=a.p+"static/media/back_icon.7a172fc9.svg"},function(e,t,a){e.exports=a(83)},,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),c=a(13),i=a(10),s=a(17),u=a(30),d=function(e,t){return Object(u.a)(Object(u.a)({},e),t)},m=function(e){return null===e||null!==e.match(/^ *$/)},p=function(e){var t=Math.log10(e)/3|0;if(0===t)return e;var a=["","k","M","G","T","P","E"][t];return(e/Math.pow(10,3*t)).toFixed(1)+a},h={AUTH_TOKEN:null,USER:null,IS_AUTHORIZED:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_AUTH":return d(e,{AUTH_TOKEN:t.token});case"DELETE_AUTH":return d(e,{AUTH_TOKEN:null});case"ADD_USER":return d(e,{USER:t.user,IS_AUTHORIZED:!0});case"DELETE_USER":return d(e,{USER:null,IS_AUTHORIZED:!1});default:return e}},E={SEARCH_RESULTS:null,SEARCH_QUERY:"",loading:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SARCH":return d(e,{SEARCH_RESULTS:t.data});case"UPDATE_QUERY":return d(e,{SEARCH_QUERY:t.data});case"SET_LOADING":return d(e,{loading:t.value});default:return e}},g=(a(64),a(8)),b=a(9),v=a(12),y=a(11),k=a(2),S=a(15),A=a.n(S),C=a(42),R=a.n(C),U=function(e){return r.a.createElement("div",{className:e.className+" "+R.a.container},e.children)},O=a(43),T=a.n(O),N=function(e){return r.a.createElement("div",{className:T.a.LoginCard},r.a.createElement("h3",null,"Get started"),r.a.createElement("button",{onClick:e.onClick},"Login with Spotify"))},L=a(44),j=a.n(L),w=function(e){return r.a.createElement("img",{src:j.a,alt:"Spotifyndr logo",className:e.className})},H=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).loginWithSpotifyHandler=function(){var e="https://accounts.spotify.com/authorize";e+="?response_type=token",e+="&client_id="+encodeURIComponent("ca352bf1c0ea43b58b0e20abba160090"),e+="&scope="+encodeURIComponent("user-read-private user-read-email"),e+="&redirect_uri=https://julescript.github.io/spotifyndr",window.location=e},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:A.a.Landing},r.a.createElement(U,{className:A.a.Landing},r.a.createElement("div",{className:A.a.leftPane},r.a.createElement("h1",null,"find",r.a.createElement("br",null),"your",r.a.createElement("br",null),"artists"),r.a.createElement(w,{className:A.a.IconLogo})),r.a.createElement("div",{className:A.a.rightPane},r.a.createElement(N,{onClick:this.loginWithSpotifyHandler}))))}}]),a}(n.Component),x=Object(i.b)((function(e){return{user:e.authReducer.USER}}),(function(e){return{setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(Object(k.h)(H)),D=a(21),B=a.n(D),I=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:B.a.NavBar},r.a.createElement(w,null),r.a.createElement("input",{type:"search",disabled:!this.props.user,placeholder:"Search Spotify artists",onChange:this.props.onChange,onKeyDown:this.props.enterPressed}),this.props.user?r.a.createElement("div",{className:B.a.Account},r.a.createElement("div",null,this.props.user.display_name),r.a.createElement("img",{src:null,alt:""})):r.a.createElement("div",{className:B.a.Account},r.a.createElement("div",null,"Loading"),r.a.createElement("img",{src:null,alt:""})))}}]),a}(n.Component),P=a(45),G=a.n(P),W=function(e){return r.a.createElement("div",{className:e.className+" "+G.a.SectionTitle},r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,e.subtitle))},F=a(46),K=a.n(F),M=function(e){return r.a.createElement("div",{className:K.a.Grid},e.children)},Q=a(22),q=a.n(Q),z=a(47),Y=a.n(z),Z=a(48),J=a.n(Z),V=a(49),X=a.n(V),$=function(e){var t=Math.round(parseFloat(e.rating));t>5?t=5:t<0&&(t=0);for(var a=[0,0,0,0,0],n=0;n<t;n++)a[n]=1;var o=a.map((function(e,t){return 0===e?r.a.createElement("img",{key:t,src:X.a,alt:"Empty Star"}):r.a.createElement("img",{key:t,src:J.a,alt:"Filled Star"})}));return r.a.createElement("div",{className:Y.a.RatingStars},o)},ee=function(e){return r.a.createElement("div",{className:q.a.ArtistCard,style:{backgroundImage:"url("+e.img+")"},onClick:e.onClick},r.a.createElement("div",{className:q.a.Spacer}),r.a.createElement("div",{className:q.a.Info},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,(t=e.followers)>1?p(t)+" followers":1===t?p(t)+" follower":"No followers"),r.a.createElement($,{rating:e.stars})));var t},te=a(50),ae=a.n(te).a.create({baseURL:"https://api.spotify.com/v1",headers:{"content-type":"application/json",Accept:"application/json"}});var ne=ae,re=a(51),oe=a.n(re),le=function(e){return r.a.createElement("div",{className:oe.a.WelcomeText},r.a.createElement("h1",null,e.name,","),r.a.createElement("h2",null,"Welcome to Spotifyndr"),r.a.createElement("hr",null),r.a.createElement("h3",null,"Simply start by typing your desired artist in the search bar"))},ce=a(23),ie=a.n(ce),se=function(e){var t=[ie.a.LoaderParent];return e.light&&t.push(ie.a.light),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:ie.a.Loader},"Loading ..."))},ue=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:null,searchQuery:"",loading:!1,error:!1},e.handleSearch=function(t){"Enter"!==t.key||m(t.target.value)||(e.setState({searchQuery:t.target.value,loading:!0,error:!1}),e.props.onQueryUpdated(t.target.value),e.props.onLoadingUpdated(!0),ne.get("/search/",{headers:{Authorization:"Bearer "+e.props.token},params:{q:t.target.value,type:"artist",limit:12}}).then((function(t){e.setState({searchResults:t.data.artists,loading:!1,error:!1}),console.log("GOT EM"),e.props.onResultsUpdated(t.data.artists),e.props.onLoadingUpdated(!1)})).catch((function(t){e.setState({searchResults:null,loading:!1,error:t.response}),console.log("GOT EROOR"),e.props.onResultsUpdated(null),e.props.onLoadingUpdated(!1)})))},e.ArtistClickedHandler=function(t){e.props.history.push({pathname:"/artists/"+t+"/albums"})},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=null;return this.props.results&&!this.props.loading&&(console.log(this.props.results),t=this.props.results.items.map((function(t){return r.a.createElement(ee,{img:t.images[1]?t.images[1].url:null,name:t.name,followers:t.followers.total,stars:t.popularity/20,key:t.id,onClick:function(){return e.ArtistClickedHandler(t.id)}})}))),this.props.loading&&(t=r.a.createElement(se,null)),r.a.createElement(U,null,r.a.createElement(I,{enterPressed:this.handleSearch,user:this.props.user,query:this.props.query}),""!==this.props.query?r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{title:"Artists",subtitle:"Showing results for \u201c"+this.props.query+'"'}),this.props.loading?t:r.a.createElement(M,null,t)):r.a.createElement(le,{name:this.props.user?this.props.user.display_name:"Hello"}))}}]),a}(n.Component),de=Object(i.b)((function(e){return{user:e.authReducer.USER,token:e.authReducer.AUTH_TOKEN,results:e.searchReducer.SEARCH_RESULTS,query:e.searchReducer.SEARCH_QUERY,loading:e.searchReducer.loading}}),(function(e){return{onResultsUpdated:function(t){return e({type:"UPDATE_SARCH",data:t})},onQueryUpdated:function(t){return e({type:"UPDATE_QUERY",data:t})},onLoadingUpdated:function(t){return e({type:"SET_LOADING",value:t})}}}))(Object(k.h)(ue)),me=a(24),pe=a.n(me),he=a(52),_e=a.n(he),Ee=function(e){return r.a.createElement("div",{className:_e.a.AlbumCard},r.a.createElement("div",{style:{backgroundImage:"url("+e.img+")"}},r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled},"Preview on Spotify")),r.a.createElement("h3",null,e.name),r.a.createElement("h4",null,e.date+" \xb7 "+((t=e.tracks)>1?t+" tracks":1===t?t+" track":"No tracks")));var t},fe=a(53),ge=a.n(fe),be=a(54),ve=a.n(be),ye=function(e){return r.a.createElement("div",{className:ge.a.BackButton,onClick:e.onClick},r.a.createElement("img",{src:ve.a,alt:""}),r.a.createElement("div",null,"Back"))},ke=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={albums:null,loading:!0,error:!1},e.backButtonHandler=function(){e.props.history.goBack()},e.previewButtonClickedHandler=function(e){window.open(e,"_blank")},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;ne.get(this.props.match.url+"/",{headers:{Authorization:"Bearer "+this.props.token},params:{limit:12}}).then((function(t){e.setState({albums:t.data.items,loading:!1,error:!1}),console.log(e.state.albums)})).catch((function(t){e.setState({albums:null,loading:!1,error:t.response})}))}},{key:"render",value:function(){var e=this,t=null;return this.state.albums&&!this.state.loading&&(t=this.state.albums.map((function(t){return r.a.createElement(Ee,{key:t.id,img:t.images[1]?t.images[1].url:null,name:t.name,date:t.release_date.substring(0,4),tracks:t.total_tracks,onClick:function(){return e.previewButtonClickedHandler(t.external_urls.spotify)},disabled:!1})}))),this.state.loading&&(t=r.a.createElement(se,null)),r.a.createElement(U,{className:pe.a.Albums},r.a.createElement("div",{className:pe.a.Header},r.a.createElement(W,{title:this.state.albums?this.state.albums[0].artists[0].name:"Artist",subtitle:"Albums"}),r.a.createElement("div",{className:pe.a.Back},r.a.createElement(ye,{onClick:this.backButtonHandler}))),this.state.loading?t:r.a.createElement(M,null,t))}}]),a}(n.Component),Se=Object(i.b)((function(e){return{token:e.authReducer.AUTH_TOKEN}}),(function(e){return{}}))(Object(k.h)(ke)),Ae=a(29),Ce=a.n(Ae),Re=a(18),Ue=a.n(Re),Oe=function(e){return r.a.createElement("div",{className:Ue.a.Footer},r.a.createElement(U,{className:Ue.a.Container},r.a.createElement("div",{className:Ue.a.Logo},"Spotifyndr"),r.a.createElement("div",{className:Ue.a.Copyright},"Made with ",r.a.createElement("span",{role:"img","aria-label":"heart emoji"},"\u2764\ufe0f")," by ",r.a.createElement("a",{href:"https://github.com/julescript",rel:"noopener noreferrer",target:"_blank"},"julescript"))))},Te=function(e){return r.a.createElement("div",{className:Ce.a.Layout},r.a.createElement("div",{className:Ce.a.Children},e.children),r.a.createElement(Oe,null))},Ne=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={is_auth:!1,loading:!0},e.fetchUser=function(){ne.get("/me/",{headers:{Authorization:"Bearer "+e.props.token}}).then((function(t){e.props.setUser(t.data),e.setState({is_auth:!0,loading:!1})})).catch((function(t){e.props.delToken(),e.setState({is_auth:!1,loading:!1}),console.log("Something went wrong")}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{})["/access_token"];console.log(e),e?this.props.setToken(e):console.log("Not authorized yet")}},{key:"render",value:function(){return this.props.token?(!this.state.is_auth&&this.props.token&&(this.fetchUser(),console.log("not_auth")),r.a.createElement(Te,null,r.a.createElement(k.d,null,r.a.createElement(k.b,{path:"/",exact:!0,component:de}),r.a.createElement(k.b,{path:"/artists/:id/albums",exact:!0,component:Se}),r.a.createElement(k.b,{exact:!0,path:"/artists/:id",render:function(){return r.a.createElement(k.a,{to:"/"})}}),r.a.createElement(k.b,{exact:!0,path:"/artists",render:function(){return r.a.createElement(k.a,{to:"/"})}}),r.a.createElement(k.b,{exact:!0,path:"/:access_token",render:function(){return r.a.createElement(k.a,{to:"/"})}})))):r.a.createElement(k.d,null,r.a.createElement(k.b,{path:"/",exact:!0,component:x}))}}]),a}(n.Component),Le=Object(i.b)((function(e){return{token:e.authReducer.AUTH_TOKEN,user:e.authReducer.USER,is_auth:e.authReducer.IS_AUTHORIZED}}),(function(e){return{delToken:function(){return e({type:"DELETE_AUTH"})},setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(Ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(){var e=Object(k.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var we=Object(s.b)({authReducer:_,searchReducer:f}),He=Object(s.c)(we);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:He},r.a.createElement(c.a,{basename:"/"},r.a.createElement(je,null),r.a.createElement(Le,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[55,1,2]]]);
//# sourceMappingURL=main.dee15931.chunk.js.map
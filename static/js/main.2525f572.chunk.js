(this.webpackJsonpspotifyndr=this.webpackJsonpspotifyndr||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports={Landing:"Landing_Landing__1vOQe",leftPane:"Landing_leftPane__1x9Iz",rightPane:"Landing_rightPane__-yZ8x",IconLogo:"Landing_IconLogo__JPSR_",breath:"Landing_breath__2BR55"}},,,function(e,t,a){e.exports={Footer:"Footer_Footer__GZvmW",Container:"Footer_Container__2dBUl",Logo:"Footer_Logo__cgvkU",Copyright:"Footer_Copyright__1iKjX"}},,,function(e,t,a){e.exports={NavBar:"NavBar_NavBar__3JWdI",Account:"NavBar_Account__3PwKk"}},function(e,t,a){e.exports={ArtistCard:"ArtistCard_ArtistCard__OuGo2",Spacer:"ArtistCard_Spacer__1VUO8",Info:"ArtistCard_Info__3YDaq"}},function(e,t,a){e.exports={Loader:"Spinner_Loader__1twK-",LoaderParent:"Spinner_LoaderParent__3RO6f",light:"Spinner_light__1Esrz",load8:"Spinner_load8__36vjM"}},function(e,t,a){e.exports={Albums:"Albums_Albums__17CVc",Header:"Albums_Header__2dE3H",Back:"Albums_Back__1htdx"}},,,,,function(e,t,a){e.exports={Layout:"Layout_Layout__2BpO9",Children:"Layout_Children__2syKp"}},,,,,,,,,,,,,function(e,t,a){e.exports={container:"Container_container__2QYRU"}},function(e,t,a){e.exports={LoginCard:"LoginCard_LoginCard__dImu9",enable:"LoginCard_enable__3Idwm"}},function(e,t,a){e.exports=a.p+"static/media/logo_icon.da3ea075.svg"},function(e,t,a){e.exports={SectionTitle:"SectionTitle_SectionTitle__3quiz"}},function(e,t,a){e.exports={Grid:"CardsGrid_Grid__6-8yi",SectionTitle:"CardsGrid_SectionTitle__2XE0A"}},function(e,t,a){e.exports={RatingStars:"RatingStars_RatingStars__2DSv8"}},function(e,t,a){e.exports=a.p+"static/media/star_filled.765ace4e.svg"},function(e,t,a){e.exports=a.p+"static/media/star_empty.21cb713c.svg"},,function(e,t,a){e.exports={WelcomeText:"WelcomeText_WelcomeText__1HheW"}},function(e,t,a){e.exports={AlbumCard:"AlbumCard_AlbumCard__2h8gP"}},function(e,t,a){e.exports={BackButton:"BackButton_BackButton__1Gysp"}},function(e,t,a){e.exports=a.p+"static/media/back_icon.7a172fc9.svg"},function(e,t,a){e.exports=a(83)},,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(13),i=a(10),s=a(17),u=a(30),m=function(e,t){return Object(u.a)(Object(u.a)({},e),t)},d=function(e){return null===e||null!==e.match(/^ *$/)},h=function(e){var t=Math.log10(e)/3|0;if(0===t)return e;var a=["","k","M","G","T","P","E"][t];return(e/Math.pow(10,3*t)).toFixed(1)+a},p={AUTH_TOKEN:null,USER:null,IS_AUTHORIZED:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_AUTH":return m(e,{AUTH_TOKEN:t.token});case"DELETE_AUTH":return m(e,{AUTH_TOKEN:null});case"ADD_USER":return m(e,{USER:t.user,IS_AUTHORIZED:!0});case"DELETE_USER":return m(e,{USER:null,IS_AUTHORIZED:!1});default:return e}},_=(a(64),a(8)),E=a(9),g=a(12),b=a(11),v=a(2),y=a(15),k=a.n(y),S=a(42),A=a.n(S),C=function(e){return r.a.createElement("div",{className:e.className+" "+A.a.container},e.children)},O=a(43),N=a.n(O),j=function(e){return r.a.createElement("div",{className:N.a.LoginCard},r.a.createElement("h3",null,"Get started"),r.a.createElement("button",{onClick:e.onClick},"Login with Spotify"))},T=a(44),w=a.n(T),R=function(e){return r.a.createElement("img",{src:w.a,alt:"Spotifyndr logo",className:e.className})},L=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).loginWithSpotifyHandler=function(){var e="https://accounts.spotify.com/authorize";e+="?response_type=token",e+="&client_id="+encodeURIComponent("ca352bf1c0ea43b58b0e20abba160090"),e+="&scope="+encodeURIComponent("user-read-private user-read-email"),e+="&redirect_uri=https://julescript.github.io/spotifyndr",window.location=e},e}return Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:k.a.Landing},r.a.createElement(C,{className:k.a.Landing},r.a.createElement("div",{className:k.a.leftPane},r.a.createElement("h1",null,"find",r.a.createElement("br",null),"your",r.a.createElement("br",null),"artists"),r.a.createElement(R,{className:k.a.IconLogo})),r.a.createElement("div",{className:k.a.rightPane},r.a.createElement(j,{onClick:this.loginWithSpotifyHandler}))))}}]),a}(n.Component),U=Object(i.b)((function(e){return{user:e.authReducer.USER}}),(function(e){return{setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(Object(v.h)(L)),x=a(21),B=a.n(x),H=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:B.a.NavBar},r.a.createElement(R,null),r.a.createElement("input",{type:"search",disabled:!this.props.user,placeholder:"Search Spotify artists",onChange:this.props.onChange,onKeyDown:this.props.enterPressed}),this.props.user?r.a.createElement("div",{className:B.a.Account},r.a.createElement("div",null,this.props.user.display_name),r.a.createElement("img",{src:null,alt:""})):r.a.createElement("div",{className:B.a.Account},r.a.createElement("div",null,"Loading"),r.a.createElement("img",{src:null,alt:""})))}}]),a}(n.Component),D=a(45),I=a.n(D),P=function(e){return r.a.createElement("div",{className:e.className+" "+I.a.SectionTitle},r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,e.subtitle))},W=a(46),F=a.n(W),K=function(e){return r.a.createElement("div",{className:F.a.Grid},e.children)},G=a(22),M=a.n(G),z=a(47),Q=a.n(z),Z=a(48),J=a.n(Z),q=a(49),V=a.n(q),X=function(e){var t=Math.round(parseFloat(e.rating));t>5?t=5:t<0&&(t=0);for(var a=[0,0,0,0,0],n=0;n<t;n++)a[n]=1;var o=a.map((function(e,t){return 0===e?r.a.createElement("img",{key:t,src:V.a,alt:"Empty Star"}):r.a.createElement("img",{key:t,src:J.a,alt:"Filled Star"})}));return r.a.createElement("div",{className:Q.a.RatingStars},o)},Y=function(e){return r.a.createElement("div",{className:M.a.ArtistCard,style:{backgroundImage:"url("+e.img+")"},onClick:e.onClick},r.a.createElement("div",{className:M.a.Spacer}),r.a.createElement("div",{className:M.a.Info},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,(t=e.followers)>1?h(t)+" followers":1===t?h(t)+" follower":"No followers"),r.a.createElement(X,{rating:e.stars})));var t},$=a(50),ee=a.n($).a.create({baseURL:"https://api.spotify.com/v1",headers:{"content-type":"application/json",Accept:"application/json"}});var te=ee,ae=a(51),ne=a.n(ae),re=function(e){return r.a.createElement("div",{className:ne.a.WelcomeText},r.a.createElement("h1",null,e.name,","),r.a.createElement("h2",null,"Welcome to Spotifyndr"),r.a.createElement("hr",null),r.a.createElement("h3",null,"Simply start by typing your desired artist in the search bar"))},oe=a(23),ce=a.n(oe),le=function(e){var t=[ce.a.LoaderParent];return e.light&&t.push(ce.a.light),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:ce.a.Loader},"Loading ..."))},ie=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:null,searchQuery:"",loading:!1,error:!1},e.handleSearch=function(t){"Enter"!==t.key||d(t.target.value)||(e.setState({searchQuery:t.target.value,loading:!0,error:!1}),te.get("/search/",{headers:{Authorization:"Bearer "+e.props.token},params:{q:t.target.value,type:"artist",limit:12}}).then((function(t){e.setState({searchResults:t.data.artists,loading:!1,error:!1})})).catch((function(t){e.setState({searchResults:null,loading:!1,error:t.response})})))},e.ArtistClickedHandler=function(t){e.props.history.push({pathname:"/artists/"+t+"/albums"})},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=null;return this.state.searchResults&&!this.state.loading&&(t=this.state.searchResults.items.map((function(t){return r.a.createElement(Y,{img:t.images[1]?t.images[1].url:null,name:t.name,followers:t.followers.total,stars:t.popularity/20,key:t.id,onClick:function(){return e.ArtistClickedHandler(t.id)}})}))),this.state.loading&&(t=r.a.createElement(le,null)),r.a.createElement(C,null,r.a.createElement(H,{enterPressed:this.handleSearch,user:this.props.user}),""!==this.state.searchQuery?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{title:"Artists",subtitle:"Showing results for \u201c"+this.state.searchQuery+'"'}),this.state.loading?t:r.a.createElement(K,null,t)):r.a.createElement(re,{name:this.props.user?this.props.user.display_name:"Hello"}))}}]),a}(n.Component),se=Object(i.b)((function(e){return{user:e.authReducer.USER,token:e.authReducer.AUTH_TOKEN}}),(function(e){return{}}))(Object(v.h)(ie)),ue=a(24),me=a.n(ue),de=a(52),he=a.n(de),pe=function(e){return r.a.createElement("div",{className:he.a.AlbumCard},r.a.createElement("div",{style:{backgroundImage:"url("+e.img+")"}},r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled},"Preview on Spotify")),r.a.createElement("h3",null,e.name),r.a.createElement("h4",null,e.date+" \xb7 "+e.tracks))},fe=a(53),_e=a.n(fe),Ee=a(54),ge=a.n(Ee),be=function(e){return r.a.createElement("div",{className:_e.a.BackButton,onClick:e.onClick},r.a.createElement("img",{src:ge.a,alt:""}),r.a.createElement("div",null,"Back"))},ve=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={albums:null,loading:!0,error:!1},e.backButtonHandler=function(){e.props.history.goBack()},e.previewButtonClickedHandler=function(e){window.open(e,"_blank")},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this;te.get(this.props.match.url+"/",{headers:{Authorization:"Bearer "+this.props.token},params:{limit:12}}).then((function(t){e.setState({albums:t.data.items,loading:!1,error:!1}),console.log(e.state.albums)})).catch((function(t){e.setState({albums:null,loading:!1,error:t.response})}))}},{key:"render",value:function(){var e=this,t=null;return this.state.albums&&!this.state.loading&&(t=this.state.albums.map((function(t){return r.a.createElement(pe,{key:t.id,img:t.images[1]?t.images[1].url:null,name:t.name,date:t.release_date,tracks:t.total_tracks,onClick:function(){return e.previewButtonClickedHandler(t.external_urls.spotify)},disabled:!1})}))),this.state.loading&&(t=r.a.createElement(le,null)),r.a.createElement(C,{className:me.a.Albums},r.a.createElement("div",{className:me.a.Header},r.a.createElement(P,{title:this.state.albums?this.state.albums[0].artists[0].name:"Artist",subtitle:"Albums"}),r.a.createElement("div",{className:me.a.Back},r.a.createElement(be,{onClick:this.backButtonHandler}))),this.state.loading?t:r.a.createElement(K,null,t))}}]),a}(n.Component),ye=Object(i.b)((function(e){return{token:e.authReducer.AUTH_TOKEN}}),(function(e){return{}}))(Object(v.h)(ve)),ke=a(29),Se=a.n(ke),Ae=a(18),Ce=a.n(Ae),Oe=function(e){return r.a.createElement("div",{className:Ce.a.Footer},r.a.createElement(C,{className:Ce.a.Container},r.a.createElement("div",{className:Ce.a.Logo},"Spotifyndr"),r.a.createElement("div",{className:Ce.a.Copyright},"Made with ",r.a.createElement("span",{role:"img","aria-label":"heart emoji"},"\u2764\ufe0f")," by ",r.a.createElement("a",{href:"https://github.com/julescript",rel:"noopener noreferrer",target:"_blank"},"julescript"))))},Ne=function(e){return r.a.createElement("div",{className:Se.a.Layout},r.a.createElement("div",{className:Se.a.Children},e.children),r.a.createElement(Oe,null))},je=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={is_auth:!1,loading:!0},e.fetchUser=function(){te.get("/me/",{headers:{Authorization:"Bearer "+e.props.token}}).then((function(t){e.props.setUser(t.data),e.setState({is_auth:!0,loading:!1})})).catch((function(t){e.props.delToken(),e.setState({is_auth:!1,loading:!1}),console.log("Something went wrong")}))},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{})["/access_token"];console.log(e),e?this.props.setToken(e):console.log("Not authorized yet")}},{key:"render",value:function(){return this.props.token?(!this.state.is_auth&&this.props.token&&(this.fetchUser(),console.log("not_auth")),r.a.createElement(Ne,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/",exact:!0,component:se}),r.a.createElement(v.b,{path:"/artists/:id/albums",exact:!0,component:ye}),r.a.createElement(v.b,{exact:!0,path:"/artists/:id",render:function(){return r.a.createElement(v.a,{to:"/"})}}),r.a.createElement(v.b,{exact:!0,path:"/artists",render:function(){return r.a.createElement(v.a,{to:"/"})}}),r.a.createElement(v.b,{exact:!0,path:"/:access_token",render:function(){return r.a.createElement(v.a,{to:"/"})}})))):r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/",exact:!0,component:U}))}}]),a}(n.Component),Te=Object(i.b)((function(e){return{token:e.authReducer.AUTH_TOKEN,user:e.authReducer.USER,is_auth:e.authReducer.IS_AUTHORIZED}}),(function(e){return{delToken:function(){return e({type:"DELETE_AUTH"})},setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(){var e=Object(v.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Re=Object(s.b)({authReducer:f}),Le=Object(s.c)(Re);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Le},r.a.createElement(l.a,{basename:"/"},r.a.createElement(we,null),r.a.createElement(Te,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[55,1,2]]]);
//# sourceMappingURL=main.2525f572.chunk.js.map
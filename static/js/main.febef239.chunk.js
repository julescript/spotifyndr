(this.webpackJsonpspotifyndr=this.webpackJsonpspotifyndr||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){e.exports={Landing:"Landing_Landing__1vOQe",leftPane:"Landing_leftPane__1x9Iz",rightPane:"Landing_rightPane__-yZ8x",IconLogo:"Landing_IconLogo__JPSR_",breath:"Landing_breath__2BR55"}},,,function(e,t,a){e.exports={NavBar:"NavBar_NavBar__3JWdI",Account:"NavBar_Account__3PwKk",DropdownContent:"NavBar_DropdownContent__2jBhY"}},function(e,t,a){e.exports={Footer:"Footer_Footer__GZvmW",Container:"Footer_Container__2dBUl",Logo:"Footer_Logo__cgvkU",Copyright:"Footer_Copyright__1iKjX"}},,,,function(e,t,a){e.exports={ArtistCard:"ArtistCard_ArtistCard__OuGo2",Spacer:"ArtistCard_Spacer__1VUO8",Info:"ArtistCard_Info__3YDaq"}},function(e,t,a){e.exports={Loader:"Spinner_Loader__1twK-",LoaderParent:"Spinner_LoaderParent__3RO6f",light:"Spinner_light__1Esrz",load8:"Spinner_load8__36vjM"}},function(e,t,a){e.exports={Albums:"Albums_Albums__17CVc",Header:"Albums_Header__2dE3H",Back:"Albums_Back__1htdx"}},,,,,,function(e,t){e.exports="data:image/png;base64,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"},function(e,t,a){e.exports={Layout:"Layout_Layout__2BpO9",Children:"Layout_Children__2syKp"}},,,,,,,,,,,function(e,t,a){e.exports={container:"Container_container__2QYRU"}},function(e,t,a){e.exports={LoginCard:"LoginCard_LoginCard__dImu9",enable:"LoginCard_enable__3Idwm"}},function(e,t,a){e.exports=a.p+"static/media/logo_icon.da3ea075.svg"},,function(e,t,a){e.exports={SectionTitle:"SectionTitle_SectionTitle__3quiz"}},function(e,t,a){e.exports={Grid:"CardsGrid_Grid__6-8yi",SectionTitle:"CardsGrid_SectionTitle__2XE0A"}},function(e,t,a){e.exports={RatingStars:"RatingStars_RatingStars__2DSv8"}},function(e,t,a){e.exports=a.p+"static/media/star_filled.765ace4e.svg"},function(e,t,a){e.exports=a.p+"static/media/star_empty.21cb713c.svg"},function(e,t,a){e.exports=a.p+"static/media/no_img.8947b3d8.svg"},,function(e,t,a){e.exports={WelcomeText:"WelcomeText_WelcomeText__1HheW"}},function(e,t,a){e.exports={EmptyState:"EmptyState_EmptyState__2Popr"}},function(e,t,a){e.exports={ErrorState:"ErrorState_ErrorState__ei3nn"}},function(e,t,a){e.exports={AlbumCard:"AlbumCard_AlbumCard__2h8gP"}},function(e,t,a){e.exports={BackButton:"BackButton_BackButton__1Gysp"}},function(e,t,a){e.exports=a.p+"static/media/back_icon.7a172fc9.svg"},function(e,t,a){e.exports=a(91)},,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),s=a.n(o),i=a(14),l=a(9),c=a(18),u=a(13),d=function(e,t){return Object(u.a)(Object(u.a)({},e),t)},p=function(e){return null===e||null!==e.match(/^ *$/)},m=function(e){var t=Math.log10(e)/3|0;if(0===t)return e;var a=["","k","M","G","T","P","E"][t];return(e/Math.pow(10,3*t)).toFixed(1)+a},h=function(e,t){var a;return function(){var n=this,r=arguments;clearTimeout(a),a=setTimeout((function(){return e.apply(n,r)}),t)}},f=function(){return document.documentElement.scrollHeight-document.documentElement.scrollTop<=document.documentElement.clientHeight+80},g={AUTH_TOKEN:null,USER:null,IS_AUTHORIZED:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_AUTH":return localStorage.setItem("token",t.token),d(e,{AUTH_TOKEN:t.token});case"DELETE_AUTH":return localStorage.setItem("token",null),d(e,{AUTH_TOKEN:null});case"ADD_USER":return d(e,{USER:t.user,IS_AUTHORIZED:!0});case"DELETE_USER":return d(e,{USER:null,IS_AUTHORIZED:!1});default:return e}},b={SEARCH_RESULTS:null,SEARCH_QUERY:"",loading:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SARCH":return d(e,{SEARCH_RESULTS:t.data});case"UPDATE_QUERY":return d(e,{SEARCH_QUERY:t.data});case"SET_LOADING":return d(e,{loading:t.value});default:return e}},A=(a(70),a(7)),_=a(8),k=a(11),y=a(10),C=a(2),S=a(16),U=a.n(S),R=a(44),O=a.n(R),N=function(e){return r.a.createElement("div",{className:e.className+" "+O.a.container},e.children)},j=a(45),T=a.n(j),B=function(e){return r.a.createElement("div",{className:T.a.LoginCard},r.a.createElement("h3",null,"Get started"),r.a.createElement("button",{onClick:e.onClick},"Login with Spotify"))},w=a(46),H=a.n(w),L=function(e){return r.a.createElement("img",{src:H.a,alt:"Spotifyndr logo",className:e.className})},I=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).loginWithSpotifyHandler=function(){var e="https://accounts.spotify.com/authorize";e+="?response_type=token",e+="&client_id="+encodeURIComponent("ca352bf1c0ea43b58b0e20abba160090"),e+="&scope="+encodeURIComponent("user-read-private user-read-email"),e+="&redirect_uri=https://julescript.github.io/spotifyndr",window.location=e},e}return Object(_.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:U.a.Landing},r.a.createElement(N,{className:U.a.Landing},r.a.createElement("div",{className:U.a.leftPane},r.a.createElement("h1",null,"find",r.a.createElement("br",null),"your",r.a.createElement("br",null),"artists"),r.a.createElement(L,{className:U.a.IconLogo})),r.a.createElement("div",{className:U.a.rightPane},r.a.createElement(B,{onClick:this.loginWithSpotifyHandler}))))}}]),a}(n.Component),D=Object(l.b)((function(e){return{user:e.authReducer.USER}}),(function(e){return{setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(Object(C.h)(I)),x=a(23),W=a(19),q=a.n(W),Y=a(47),P=a(32),G=a.n(P),K=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).logoutHandler=function(){e.props.delToken()},e}return Object(_.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:q.a.NavBar},r.a.createElement(L,null),r.a.createElement(Y.DebounceInput,{minLength:3,debounceTimeout:300,onChange:this.props.onChange,placeholder:"Search Spotify artists",type:"search",disabled:!this.props.user}),this.props.user?r.a.createElement("div",{className:q.a.Account},r.a.createElement("div",null,this.props.user.display_name),r.a.createElement("img",{src:G.a,alt:""}),r.a.createElement("div",{className:q.a.DropdownContent},r.a.createElement("a",{onClick:this.logoutHandler},"Logout"))):r.a.createElement("div",{className:q.a.Account},r.a.createElement("div",null,"Loading"),r.a.createElement("img",{src:G.a,alt:""})))}}]),a}(n.Component),J=Object(l.b)((function(e){return{token:e.authReducer.AUTH_TOKEN,user:e.authReducer.USER,is_auth:e.authReducer.IS_AUTHORIZED}}),(function(e){return{delToken:function(){return e({type:"DELETE_AUTH"})},setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(K),Q=a(48),z=a.n(Q),F=function(e){return r.a.createElement("div",{className:e.className+" "+z.a.SectionTitle},r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,e.subtitle))},M=a(49),Z=a.n(M),V=function(e){return r.a.createElement("div",{className:Z.a.Grid},e.children)},X=a(24),$=a.n(X),ee=a(50),te=a.n(ee),ae=a(51),ne=a.n(ae),re=a(52),oe=a.n(re),se=function(e){var t=Math.round(parseFloat(e.rating));t>5?t=5:t<0&&(t=0);for(var a=[0,0,0,0,0],n=0;n<t;n++)a[n]=1;var o=a.map((function(e,t){return 0===e?r.a.createElement("img",{key:t,src:oe.a,alt:"Empty Star"}):r.a.createElement("img",{key:t,src:ne.a,alt:"Filled Star"})}));return r.a.createElement("div",{className:te.a.RatingStars},o)},ie=a(53),le=a.n(ie),ce=function(e){var t,a={backgroundImage:"url("+(e.img?e.img:le.a)+")",backgroundSize:e.img?"cover":"contain",backgroundPosition:e.img?"center":"top"};return r.a.createElement("div",{className:$.a.ArtistCard,style:a,onClick:e.onClick},r.a.createElement("div",{className:$.a.Spacer}),r.a.createElement("div",{className:$.a.Info},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,(t=e.followers)>1?m(t)+" followers":1===t?m(t)+" follower":"No followers"),r.a.createElement(se,{rating:e.stars})))},ue=a(54),de=a.n(ue).a.create({baseURL:"https://api.spotify.com/v1",headers:{"content-type":"application/json",Accept:"application/json"}});var pe=de,me=a(55),he=a.n(me),fe=function(e){return r.a.createElement("div",{className:he.a.WelcomeText},r.a.createElement("h1",null,e.name,","),r.a.createElement("h2",null,"Welcome to Spotifyndr"),r.a.createElement("hr",null),r.a.createElement("h3",null,"Simply start by typing your desired artist in the search bar"))},ge=a(25),Ee=a.n(ge),be=function(e){var t=[Ee.a.LoaderParent];return e.light&&t.push(Ee.a.light),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:Ee.a.Loader},"Loading ..."))},ve=a(56),Ae=a.n(ve),_e=function(e){return r.a.createElement("div",{className:Ae.a.EmptyState},r.a.createElement("h2",null,"No Results Found"),r.a.createElement("p",null,"Sorry we couldn't find results for ",r.a.createElement("b",null,'"',e.q,'"')))},ke=a(57),ye=a.n(ke),Ce=function(e){return r.a.createElement("div",{className:ye.a.ErrorState},r.a.createElement("h1",null,e.code),r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.body))},Se=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:null,errorCode:null,errorMessage:null},e.errorConfirmedHandler=function(){e.setState({error:null})},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=pe.interceptors.request.use((function(t){return e.setState({error:null}),t})),this.resInterceptor=pe.interceptors.response.use((function(e){return e}),(function(t){e.setState({error:t})}))}},{key:"componentWillUnmount",value:function(){pe.interceptors.request.eject(this.reqInterceptor),pe.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.error?r.a.createElement(Ce,{title:"Something Went Wrong",body:this.state.error.message}):this.props.children)}}]),a}(n.Component),Ue=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:null,searchQuery:"",loading:!1,error:!1,didReachBottom:!1},e.handleSearch=function(t){var a=t.target.value;e.setState({searchQuery:a}),""===a&&(e.props.onQueryUpdated(a),e.props.onResultsUpdated(null)),p(a)||e.performSearch(a)},e.ArtistClickedHandler=function(t){e.props.history.push({pathname:"/artists/"+t+"/albums"})},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",h((function(){f()&&e.setState({didReachBottom:!0})}),100))}},{key:"componentDidUpdate",value:function(e,t){t.didReachBottom!==this.state.didReachBottom&&!1===t.didReachBottom&&this.props.results&&(this.props.results.items.length<this.props.results.total&&this.props.results.items.length>this.props.results.offset?this.fetchNext():console.log("limit reached no more requests"))}},{key:"fetchNext",value:function(){var e=this;this.setState({loading:!0,error:!1}),this.props.onLoadingUpdated(!0),pe.get(this.props.results.next,{headers:{Authorization:"Bearer "+this.props.token}}).then((function(t){var a,n=Object(u.a)({},t.data.artists),r=Object(u.a)({},e.props.results);(a=n.items).unshift.apply(a,Object(x.a)(r.items)),e.setState({searchResults:n,loading:!1,error:!1,didReachBottom:!1}),e.props.onResultsUpdated(n),e.props.onLoadingUpdated(!1)})).catch((function(t){e.setState({loading:!1,error:t.response,didReachBottom:!0}),e.props.onLoadingUpdated(!1),console.log(t)}))}},{key:"performSearch",value:function(e){var t=this;this.setState({loading:!0,error:!1,didReachBottom:!1}),this.props.onQueryUpdated(e),this.props.onLoadingUpdated(!0),pe.get("/search/",{headers:{Authorization:"Bearer "+this.props.token},params:{q:e,type:"artist",limit:12}}).then((function(e){t.setState({searchResults:e.data.artists,loading:!1,error:!1}),t.props.onResultsUpdated(e.data.artists),t.props.onLoadingUpdated(!1)})).catch((function(e){t.setState({loading:!1,error:e.response}),t.props.onLoadingUpdated(!1)}))}},{key:"render",value:function(){var e=this,t=null,a=null;return this.props.results&&(t=this.props.results.items.map((function(t){return r.a.createElement(ce,{img:t.images[1]?t.images[1].url:null,name:t.name,followers:t.followers.total,stars:t.popularity/20,key:t.id,onClick:function(){return e.ArtistClickedHandler(t.id)}})})),0!==this.props.results.items.length||this.props.loading||(a=r.a.createElement(_e,{q:this.props.query}))),this.props.loading&&!this.props.results&&(t=r.a.createElement(be,null)),r.a.createElement(N,null,r.a.createElement(J,{onChange:this.handleSearch,user:this.props.user,query:this.props.query}),""!==this.props.query?r.a.createElement(Se,null,r.a.createElement(F,{title:"Artists",subtitle:"Showing results for \u201c"+this.props.query+'"'}),!this.props.loading||this.props.results?r.a.createElement(V,null,t):t,this.props.loading&&this.props.results?r.a.createElement(be,null):null,a):r.a.createElement(fe,{name:this.props.user?this.props.user.display_name:"Hello"}))}}]),a}(n.Component),Re=Object(l.b)((function(e){return{user:e.authReducer.USER,token:e.authReducer.AUTH_TOKEN,results:e.searchReducer.SEARCH_RESULTS,query:e.searchReducer.SEARCH_QUERY,loading:e.searchReducer.loading}}),(function(e){return{onResultsUpdated:function(t){return e({type:"UPDATE_SARCH",data:t})},onQueryUpdated:function(t){return e({type:"UPDATE_QUERY",data:t})},onLoadingUpdated:function(t){return e({type:"SET_LOADING",value:t})}}}))(Object(C.h)(Ue)),Oe=a(26),Ne=a.n(Oe),je=a(58),Te=a.n(je),Be=function(e){return r.a.createElement("div",{className:Te.a.AlbumCard},r.a.createElement("div",{style:{backgroundImage:"url("+e.img+")"}},r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled},"Preview on Spotify")),r.a.createElement("h3",null,e.name),r.a.createElement("h4",null,e.date+" \xb7 "+((t=e.tracks)>1?t+" tracks":1===t?t+" track":"No tracks")));var t},we=a(59),He=a.n(we),Le=a(60),Ie=a.n(Le),De=function(e){return r.a.createElement("div",{className:He.a.BackButton,onClick:e.onClick},r.a.createElement("img",{src:Ie.a,alt:""}),r.a.createElement("div",null,"Back"))},xe=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={albums:null,loading:!0,error:!1,didReachBottom:!1},e.backButtonHandler=function(){e.props.history.goBack()},e.previewButtonClickedHandler=function(e){window.open(e,"_blank")},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",h((function(){f()&&e.setState({didReachBottom:!0})}),100)),this.fetchFirst()}},{key:"fetchFirst",value:function(){var e=this;pe.get(this.props.match.url+"/",{headers:{Authorization:"Bearer "+this.props.token},params:{limit:12}}).then((function(t){e.setState({albums:t.data,loading:!1,error:!1,didReachBottom:!1})})).catch((function(t){e.setState({albums:null,loading:!1,error:t.response,didReachBottom:!0})}))}},{key:"componentDidUpdate",value:function(e,t){t.didReachBottom!==this.state.didReachBottom&&!1===t.didReachBottom&&this.state.albums&&(this.state.albums.items.length<this.state.albums.total&&this.state.albums.items.length>this.state.albums.offset?this.fetchNext():console.log("limit reached no more requests"))}},{key:"fetchNext",value:function(){var e=this;this.setState({loading:!0,error:!1}),pe.get(this.state.albums.next,{headers:{Authorization:"Bearer "+this.props.token}}).then((function(t){var a,n=Object(u.a)({},t.data),r=Object(u.a)({},e.state.albums);(a=n.items).unshift.apply(a,Object(x.a)(r.items)),e.setState({albums:n,loading:!1,error:!1,didReachBottom:!1})})).catch((function(t){e.setState({loading:!1,error:t.response,didReachBottom:!0}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=null;return this.state.albums&&(t=this.state.albums.items.map((function(t){return r.a.createElement(Be,{key:t.id,img:t.images[1]?t.images[1].url:null,name:t.name,date:t.release_date.substring(0,4),tracks:t.total_tracks,onClick:function(){return e.previewButtonClickedHandler(t.external_urls.spotify)},disabled:!1})}))),this.state.loading&&!this.state.albums&&(t=r.a.createElement(be,null)),r.a.createElement(N,{className:Ne.a.Albums},r.a.createElement("div",{className:Ne.a.Header},r.a.createElement(F,{title:this.state.albums?this.state.albums.items[0].artists[0].name:"Artist",subtitle:"Albums"}),r.a.createElement("div",{className:Ne.a.Back},r.a.createElement(De,{onClick:this.backButtonHandler}))),r.a.createElement(Se,null,!this.state.loading||this.state.albums?r.a.createElement(V,null,t):t,this.state.loading&&this.state.albums?r.a.createElement(be,null):null))}}]),a}(n.Component),We=Object(l.b)((function(e){return{token:e.authReducer.AUTH_TOKEN}}),(function(e){return{}}))(Object(C.h)(xe)),qe=a(33),Ye=a.n(qe),Pe=a(20),Ge=a.n(Pe),Ke=function(e){return r.a.createElement("div",{className:Ge.a.Footer},r.a.createElement(N,{className:Ge.a.Container},r.a.createElement("div",{className:Ge.a.Logo},"Spotifyndr"),r.a.createElement("div",{className:Ge.a.Copyright},"Made with ",r.a.createElement("span",{role:"img","aria-label":"heart emoji"},"\u2764\ufe0f")," by ",r.a.createElement("a",{href:"https://github.com/julescript",rel:"noopener noreferrer",target:"_blank"},"julescript"))))},Je=function(e){return r.a.createElement("div",{className:Ye.a.Layout},r.a.createElement("div",{className:Ye.a.Children},e.children),r.a.createElement(Ke,null))},Qe=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={is_auth:!1,loading:!0},e.fetchUser=function(){pe.get("/me/",{headers:{Authorization:"Bearer "+e.props.token}}).then((function(t){e.props.setUser(t.data),e.setState({is_auth:!0,loading:!1})})).catch((function(t){e.props.delToken(),e.setState({is_auth:!1,loading:!1})}))},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.setToken(e);var t=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{})["/access_token"];t&&this.props.setToken(t)}},{key:"render",value:function(){return this.props.token?(!this.state.is_auth&&this.props.token&&this.fetchUser(),r.a.createElement(Je,null,r.a.createElement(C.d,null,r.a.createElement(C.b,{path:"/",exact:!0,component:Re}),r.a.createElement(C.b,{path:"/artists/:id/albums",exact:!0,component:We}),r.a.createElement(C.b,{exact:!0,path:"/artists/:id",render:function(){return r.a.createElement(C.a,{to:"/"})}}),r.a.createElement(C.b,{exact:!0,path:"/artists",render:function(){return r.a.createElement(C.a,{to:"/"})}}),r.a.createElement(C.b,{exact:!0,path:"/:access_token",render:function(){return r.a.createElement(C.a,{to:"/"})}})))):r.a.createElement(C.d,null,r.a.createElement(C.b,{path:"/",exact:!0,component:D}))}}]),a}(n.Component),ze=Object(l.b)((function(e){return{token:e.authReducer.AUTH_TOKEN,user:e.authReducer.USER,is_auth:e.authReducer.IS_AUTHORIZED}}),(function(e){return{delToken:function(){return e({type:"DELETE_AUTH"})},setToken:function(t){return e({type:"ADD_AUTH",token:t})},setUser:function(t){return e({type:"ADD_USER",user:t})}}}))(Qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(){var e=Object(C.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Me=Object(c.b)({authReducer:E,searchReducer:v}),Ze=Object(c.c)(Me);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Ze},r.a.createElement(i.a,{basename:"/"},r.a.createElement(Fe,null),r.a.createElement(ze,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[61,1,2]]]);
//# sourceMappingURL=main.febef239.chunk.js.map